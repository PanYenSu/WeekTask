<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css' />
    <link href="https://cdn.jsdelivr.net/npm/vue-loading-overlay@3/dist/vue-loading.css" rel="stylesheet">
    <style type="text/css">
    
     
        footer {
        margin-top: 50px;
        background: #212121;
        text-align: center;
        padding: 10px;
        color: #fff;
        font-size: 20px;
        /* box-sizing: border-box; */
        /* 設定footer絕對位置在底部 */
        /* position: absolute; */
      }
      
      </style>
</head>
<body>
    <div id="app" class="container">
        <!-- loading 套件 -->
      <loading :active.sync="isLoading"></loading>
        <div>
       <!-- navbar  -->
        <div class="row">            
            <div class="col">
                <a class="navbar-brand text-dark" href="#"><h2>Cha Cha Bo</h2></a>
            </div>
            <div class="col-8">
                <ul class="nav justify-content-center ">
                    <li class="nav-item">
                      <a class="nav-link text-dark" href="#">全部商品</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link text-dark" href="#">NEW ITEMS</a>
                    </li>                    
                    <li class="nav-item">
                        <a class="nav-link text-dark" href="#">ON SALES</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link text-dark" href="#">SEARCH</a>
                      </li>
                    <li class="nav-item">
                      <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
                    </li>
                  </ul>
            </div>
            <div class="col-1">               
                <a class="navbar-brand text-dark" href="#">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-cart3" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm7 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
                  </svg>
                  <span class="badge badge-light">1</span>
                </a>               
            </div>          
          </div>

<!-- 產品列表 start -->
<div class="row mt-4">
    <div v-for="(item, index) in products" :key="item.id" class="col-md-4 mb-4">
      <div class="card border-0 shadow-sm">
        <div style="height: 250px; background-size: cover; background-position: center"
          :style="{backgroundImage: `url(${item.imageUrl[0]})`}"></div>
        <div class="card-body">
          <span class="badge badge-secondary float-right ml-2">{{ item.category }}</span>         
            <a href="#" class="text-dark stretched-link">
                <h5 class="card-title">{{ item.title }}</h5></a>   
          <p class="card-text" v-html="item.content">{{ item.content }}</p>
          <!-- <a href="#" class="btn btn-primary stretched-link">Go somewhere</a> -->
          <div class="d-flex justify-content-between align-items-baseline">
            <!-- 售價(price)欄位是可選的，因此售價若為空，就顯示原價(origin_price)
            售價若不為空，就顯示原價(origin_price)與售價(price) -->
            <div v-if="!item.price" class="h5">
              {{ item.origin_price }} 元
            </div>
            <div v-else>
              <del class="h6 ">原價 {{ item.origin_price }} 元</del>
              <h5 class="" style="display:inline; position:absolute;
              right:80px;">
                特價 {{ item.price }} 元
              </h5>
            </div>
          </div>
        </div>
        <!-- <div class="card-footer text-muted">
            <button type="button" @click="addToCart(item)" class="btn btn-light" type="submit" value="ADD TO BAG" style="width:100%;height:100%">ADD TO BAG</button>
        </div> -->

            <div class="card-footer d-flex">
          <button type="button" class="btn btn-outline-secondary btn-sm" style="width:50%;" :disabled="status.loadingItem === item.id"
            @click="getDetailed(item.id)">
            <i v-if="status.loadingItem === item.id" class="spinner-grow spinner-grow-sm"></i>
            <!-- <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true" v-if="status.loadingItem  === item.id"></span> -->
            查看更多
          </button>
          <button type="button" class="btn btn-outline-dark btn-sm ml-auto" style="width:50%;" :disabled="status.loadingItem === item.id" @click="addToCart(item)">
            <!-- <i v-if="status.loadingItem === item.id" class="spinner-grow spinner-grow-sm"></i> -->
            加到購物車
            <span class="spinner-border spinner-border-sm"  aria-hidden="true" v-if="status.loadingItem  === item.id"></span>  
          </button>
          <!-- <loading :active.sync="isLoading"></loading>
          <div class="spinner-border spinner-border-sm" role="status">
            <span class="sr-only">Loading...</span>
          </div> -->

        </div>
        </div> 
        </div>
    </div>
        <!-- 分頁 元件 -->
        <pagination :pages='pagination' @update='getProducts' class="page text-center"></pagination>

        <!-- cartList modal -->
        <div class="modal fade bd-example-modal-lg cartModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <!-- carList 元件 -->
            <cartlist :temp-product='tempProduct'></cartlist>
        </div>
        <!-- 加入購物車提醒 modal -->
        <div class="modal fade bd-example-modal-sm" id='addCart' tabindex="-1" role="dialog">
            <div class="modal-dialog modal-sm" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">感謝您!</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <p>商品成功加入購物車.</p>
                </div>
              </div>
            </div>
          </div>
    </div>
</div>
<!-- 已存在購物車提醒 modal -->
<div class="modal fade bd-example-modal-sm border border-danger" id='already' tabindex="-1" role="dialog">
    <div class="modal-dialog modal-sm" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">很抱歉!</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>此商品已在購物車中.</p>
        </div>
      </div>
    </div>
  </div>
</div>
</div>



        <footer class="footer">
          圖片取自網路<br>無商業用途，僅供學習使用
        </footer>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-loading-overlay@3"></script>
    <!-- https://cdnjs.com/libraries/vee-validate 注意版本，full 則包含 rules -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vee-validate/3.3.0/vee-validate.full.min.js"></script>

    <!--  type="module" 才能夠使用 import -->
    <script type="module" src="all.js"></script>

</body>
</html>